# Как запустить проект

## Что нужно установить

### 1. Docker Desktop

1. Скачайте Docker Desktop для Windows: https://www.docker.com/products/docker-desktop/
2. Установите и запустите Docker Desktop
3. Дождитесь, пока Docker полностью запустится (иконка в трее должна быть зеленой)

### 2. Проверка установки

Откройте PowerShell и выполните:

```powershell
docker --version
docker compose version
```

Если команды работают - все готово!

## Запуск проекта

### Шаг 1: Откройте PowerShell

Нажмите `Win + X` и выберите "Windows PowerShell" или "Терминал"

### Шаг 2: Перейдите в папку проекта

```powershell
cd "C:\Users\Dima\Desktop\ебаныйбобаный\infra"
```

### Шаг 3: Запустите все сервисы

```powershell
docker compose up --build
```

**Примечание:** Если команда `docker compose` не работает, используйте `docker-compose` (с дефисом)

### Шаг 4: Дождитесь запуска

Подождите 2-3 минуты, пока все контейнеры запустятся. Вы увидите сообщения о запуске каждого сервиса.

### Шаг 5: Откройте сайт

Откройте браузер и перейдите на: **http://localhost:3000**

## Создание администратора

Чтобы получить доступ к админ-панели:

1. Зарегистрируйтесь на сайте (кнопка "Регистрация")
2. Откройте новый PowerShell и выполните:

```powershell
docker exec -it dota2-postgres psql -U postgres -d auth_db
```

3. В консоли PostgreSQL выполните (замените email на ваш):

```sql
UPDATE users SET role = 'admin' WHERE email = 'ваш_email@example.com';
\q
```

4. Выйдите из системы на сайте и войдите снова
5. В меню появится ссылка "Админ-панель"

## Остановка проекта

Нажмите `Ctrl + C` в терминале, где запущен `docker compose up`

Или в другом терминале:

```powershell
cd "C:\Users\Dima\Desktop\ебаныйбобаный\infra"
docker compose down
```

## Если что-то не работает

1. **Docker не запускается:**
   - Перезапустите Docker Desktop
   - Перезагрузите компьютер

2. **Порты заняты:**
   - Закройте программы, использующие порты 3000, 4001, 4002, 4003, 5432
   - Или измените порты в `docker-compose.yml`

3. **Ошибки при запуске:**
   - Выполните: `docker compose down -v`
   - Затем снова: `docker compose up --build`

## Полезные команды

```powershell
# Просмотр статуса контейнеров
docker compose ps

# Просмотр логов
docker compose logs

# Просмотр логов конкретного сервиса
docker compose logs frontend
docker compose logs heroes-service

# Перезапуск сервиса
docker compose restart frontend
```

## Что доступно после запуска

- **Сайт:** http://localhost:3000
- **API Auth:** http://localhost:4001
- **API Heroes:** http://localhost:4002
- **API Lore:** http://localhost:4003

## Добавление биографий

1. Войдите как администратор
2. Перейдите в "Админ-панель"
3. Найдите персонажа в списке
4. Нажмите "Редактировать"
5. Добавьте биографию в поле "Биография"
6. Сохраните

Готово! Теперь любой пользователь сможет прочитать биографию этого персонажа.

